<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Notice Board - St. Xavier's Campus</title>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>

<!-- AOS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

<style>
body { 
    margin:0; 
    font-family:'Poppins', Arial, sans-serif; 
    background: linear-gradient(120deg, #fdfbfb, #ebedee);
}

/* HEADER */
header {
    width:100%; 
    padding:25px 20px; 
    background: linear-gradient(90deg,#1e3c72,#2a5298,#ffd700); 
    color:white; 
    display:flex; 
    align-items:center; 
    gap:20px; 
    border-radius:0 0 20px 20px;
}
header img {height:65px;}
header h1 {font-size:1.7rem; font-weight:600;}

/* CONTAINER */
.container {
    width:95%; 
    max-width:1200px; 
    margin:20px auto;
}

/* CONTROLS */
.controls {
    display:flex; 
    flex-wrap:wrap; 
    gap:10px; 
    padding:12px; 
    background:linear-gradient(135deg,#ff9a9e,#fad0c4); 
    border-radius:15px; 
    justify-content:center;
}

.controls button {
    padding:8px 15px; 
    border:none; 
    border-radius:8px; 
    cursor:pointer; 
    color:white;
    font-size:15px;
}

.controls input {
    width:55px;
    padding:5px;
    border-radius:6px;
    border:1px solid #ccc;
    text-align:center;
}

/* Buttons */
#prevBtn { background: linear-gradient(45deg,#ff4e50,#f9d423); }
#nextBtn { background: linear-gradient(45deg,#36d1dc,#5b86e5); }
#zoomIn  { background: linear-gradient(45deg,#ff6a00,#ee0979); }
#zoomOut { background: linear-gradient(45deg,#43cea2,#185a9d); }

/* VIEWER */
.viewer {
    background:white;
    padding:10px; 
    border-radius:15px; 
    min-height:70vh; 
    box-shadow:0 6px 20px rgba(0,0,0,0.2);
    margin-top:15px;
    overflow-x:auto;
}

/* Make canvas auto-fit */
.page-canvas {
    width:100% !important;
    height:auto !important;
}

/* MOBILE FIX */
@media (max-width:600px) {
    header { padding:15px 10px; }
    header img { height:55px; }
    header h1 { font-size:1.3rem; }
    .controls button { font-size:14px; padding:6px 12px; }
    .viewer { padding:5px; min-height:60vh; }
}
</style>
</head>
<body>

<header>
    <img src="Image/Xaviers.jpg">
    <h1>Notice Board - St. Xavier's Campus</h1>
</header>

<div class="container">

    <div class="controls">
        <button id="prevBtn">⟨ Prev</button>
        <button id="nextBtn">Next ⟩</button>
        <span>Page</span>
        <input id="goto" type="number" min="1" value="1">
        <span id="pageCount">/ 0</span>

        <!-- Simplified zoom (auto fit still works) -->
        <button id="zoomOut">-</button>
        <span id="zoomVal">100%</span>
        <button id="zoomIn">+</button>
    </div>

    <div class="viewer" id="viewer"></div>

</div>

<script>
AOS.init({ duration:800, once:true });

const PDF_URL = "1-Xav-Campus-Xmas Invitation - 2025.pdf";

pdfjsLib.GlobalWorkerOptions.workerSrc =
  "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";

let pdfDoc = null;
let currentPage = 1;

// Auto-scaling (fit-to-width)
let scale = 1.0;

async function renderPage(pageNum) {
    const page = await pdfDoc.getPage(pageNum);

    // Fit-to-screen width
    const viewerWidth = document.getElementById("viewer").clientWidth;
    const viewport = page.getViewport({ scale: 1 });
    scale = viewerWidth / viewport.width;

    const scaledViewport = page.getViewport({ scale });

    const canvas = document.createElement("canvas");
    canvas.className = "page-canvas";
    canvas.width = scaledViewport.width;
    canvas.height = scaledViewport.height;

    const ctx = canvas.getContext("2d");

    await page.render({ canvasContext: ctx, viewport: scaledViewport }).promise;

    const viewer = document.getElementById("viewer");
    viewer.innerHTML = "";
    viewer.appendChild(canvas);

    document.getElementById("zoomVal").textContent = Math.round(scale * 100) + "%";
}

document.getElementById("prevBtn").onclick = () => {
    if (currentPage > 1) { currentPage--; renderPage(currentPage); }
};
document.getElementById("nextBtn").onclick = () => {
    if (currentPage < pdfDoc.numPages) { currentPage++; renderPage(currentPage); }
};

document.getElementById("goto").onchange = function() {
    const val = parseInt(this.value);
    if (val >= 1 && val <= pdfDoc.numPages) {
        currentPage = val;
        renderPage(currentPage);
    }
};

document.getElementById("zoomIn").onclick = () => { scale += 0.1; renderPage(currentPage); };
document.getElementById("zoomOut").onclick = () => { scale -= 0.1; if(scale < 0.5){scale=0.5;} renderPage(currentPage); };

async function loadPDF() {
    pdfDoc = await pdfjsLib.getDocument(PDF_URL).promise;
    document.getElementById("pageCount").textContent = `/ ${pdfDoc.numPages}`;
    renderPage(currentPage);
}

loadPDF();

// Re-render on window resize (mobile rotation fix)
window.addEventListener("resize", () => renderPage(currentPage));
</script>

</body>
</html>
